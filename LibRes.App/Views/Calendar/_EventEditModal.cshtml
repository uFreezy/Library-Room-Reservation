@model LibRes.App.Models.Calendar.EventEditModel

<!-- Modal -->
<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Edit Event</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body form-group">
                @using (Html.BeginForm("CreateEvent", "Calendar", FormMethod.Post, new {@class = "form-horizontal", role = "form"}))
{
    @Html.AntiForgeryToken()
    <h4>Create event.</h4>
    <hr/>
    @Html.ValidationSummary("", new {@class = "text-danger"})
    <div class="form-group">
        @Html.LabelFor(m => m.EventName, new {@class = "col-md-2 control-label"})
        <div class="col-md-10">
            @Html.TextBoxFor(m => m.EventName, new {@class = "form-control"})
        </div>
        <div>
            <button class="btn btn-primary" id="modalBtn" data-toggle="modal" data-target="#exampleModal" style="display: none;">
                Event Repeat
            </button>
            @await Component.InvokeAsync("EventRepeatComponent");
        </div>
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.BeginHour, new {@class = "col-md-2 control-label"})
        <div class="col-md-10">
            @Html.EditorFor(m => m.BeginHour,new {@class = "form-control"})
        </div>
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.EndHour, new {@class = "col-md-2 control-label"})
        <div class="col-md-10">
            @Html.EditorFor(m => m.EndHour, new {@class = "form-control"})
        </div>
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.EventDate, new {@class = "col-md-2 control-label"})
        <div class="col-md-10">
            @Html.EditorFor(m => m.EventDate, "{0:dd-MM-yyyy}", new
            {
                @class = "form-control"
            })

        </div>
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.IsReoccuring, new {@class = "col-md-2 control-label"})
        <div class="col-md-10">
            @Html.EditorFor(m => m.IsReoccuring, new {@class = "form-control"})
        </div>
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.MeetingRoomId, new {@class = "col-md-2 control-label"})
        <div class="col-md-10">
            @Html.DropDownListFor(m => m.MeetingRoomId, (IEnumerable<SelectListItem>) ViewBag.Rooms, "Select a Value")
        </div>
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Department, new {@class = "col-md-2 control-label"})
        <div class="col-md-10">
            @Html.EditorFor(m => m.Department, new {@class = "form-control"})
        </div>
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.WantsMultimedia, new {@class = "col-md-2 control-label"})
        <div class="col-md-10">
            @Html.EditorFor(m => m.WantsMultimedia, new {@class = "form-control"})
        </div>
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Description, new {@class = "col-md-2 control-label"})
        <div class="col-md-10">
            @Html.TextBoxFor(m => m.Description, new {@class = "form-control"})
        </div>
    </div>
    <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
            <input type="submit" class="btn btn-default" value="Create Event"/>
        </div>
    </div>
    <script>
        // Prevents the modal button from reloading the page.
        var link = document.getElementById("modalBtn");
        link.addEventListener("click",
            function(event) {
                event.preventDefault();
            },
            false);

        $('input[name="IsReoccuring"]').on('change',
            function() {
                console.log("ping");
                if ($('input[name="IsReoccuring"]').is(":checked")) {
                    $("#modalBtn").show();
                    var link = document.getElementById("modalBtn");
                    link.addEventListener("click",
                        function(event) {
                            event.preventDefault();
                        },
                        false);

                } else
                    $("#modalBtn").hide();
            });

    </script>
}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-toggle="modal" data-target="#eventInfo" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>